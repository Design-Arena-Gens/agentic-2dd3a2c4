:root{
  --bg:#0e0f13;
  --text:#f5efe6;
  --muted:#c7c2b8;
  --accent:#ffd36e;
  --royal:#7a5cff;
  --leaf:#7bd389;
  --rose:#ff7aa2;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: radial-gradient(1200px 600px at 70% 10%, #1b2340 0%, #111425 40%, var(--bg) 100%);
  color:var(--text);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

.container{
  min-height:100dvh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
}

.card{
  width:min(900px, 100%);
  background: rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.12);
  border-radius:20px;
  overflow:hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}

.scene{
  position:relative;
  height:360px;
  background: linear-gradient(180deg, #182447 0%, #0f152c 50%, rgba(15,21,44,0.6) 100%);
}

.scene .sun{
  position:absolute; width:140px; height:140px; border-radius:50%;
  background: radial-gradient(circle at 35% 35%, #fff9c4 0%, #ffe082 60%, #ffca28 80%, rgba(255,202,40,0.6) 100%);
  top:60%; left:70%; transform: translate(-50%, -50%);
  filter: blur(1px);
  animation: sunrise 9s ease-in-out forwards;
}

@keyframes sunrise {
  0% { top: 90%; opacity:0.7; }
  100% { top: 20%; opacity:1; }
}

.palace{
  position:absolute; bottom:0; left:50%; transform:translateX(-50%);
  width:90%; max-width:820px; height:auto;
  opacity:0.9;
}

.birds{
  position:absolute; top:20%; left:-10%; width:120px; height:60px; opacity:0.8;
  background:
    radial-gradient(circle at 20% 60%, #fff 0 2px, transparent 2px),
    radial-gradient(circle at 60% 30%, #fff 0 2px, transparent 2px),
    radial-gradient(circle at 40% 70%, #fff 0 2px, transparent 2px);
  animation: birds-fly 10s linear infinite;
}

@keyframes birds-fly {
  0% { transform: translateX(0) translateY(0) scale(1); opacity:0; }
  10% { opacity:1; }
  50% { transform: translateX(120vw) translateY(-20px) scale(1.1); }
  90% { opacity:1; }
  100% { transform: translateX(140vw) translateY(-40px) scale(1.2); opacity:0; }
}

.stage{
  padding:18px 20px; font-size:14px; color:var(--muted); border-bottom:1px dashed rgba(255,255,255,0.16);
  background: rgba(0,0,0,0.18);
}

.dialogue{
  padding:22px 22px 24px;
}

.line{ margin:10px 0 0; font-size:20px; line-height:1.6; }
.speaker{ color: var(--accent); margin-right:8px; font-weight:700; }

.controls{
  display:flex; justify-content:space-between; align-items:center;
  padding:16px 20px; border-top:1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
}

.btn{
  background: linear-gradient(180deg, var(--royal), #583bff);
  color:#fff; border:none; padding:10px 16px; border-radius:12px; cursor:pointer;
  font-weight:700; letter-spacing:0.2px; box-shadow: 0 6px 16px rgba(122,92,255,0.35);
}
.btn.secondary{ background: transparent; border:1px solid rgba(255,255,255,0.22); color:#fff }
.btn:disabled{ opacity:0.6; cursor:not-allowed; }

.progress{ height:8px; background: rgba(255,255,255,0.08); }
.progress > div{ height:100%; width:0; background: linear-gradient(90deg, var(--accent), #ffb703); transition: width .4s ease; }

.banner{
  position:fixed; inset:0; background: radial-gradient(1000px 500px at 70% 20%, rgba(255,230,170,0.12), transparent 60%), rgba(0,0,0,0.7);
  display:flex; align-items:center; justify-content:center; padding:24px; z-index:1000;
}
.banner .panel{
  width:min(720px, 100%); background:rgba(15,21,44,0.9); border:1px solid rgba(255,255,255,0.14);
  border-radius:18px; padding:22px 20px; box-shadow:0 10px 30px rgba(0,0,0,0.45);
}
.banner h1{ margin:0 0 8px; font-size:28px; }
.banner p{ margin:0 0 16px; color:var(--muted); }

.row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap }
.toggle{ display:flex; align-items:center; gap:8px; }
input[type="checkbox"]{ width:16px; height:16px; }

.typewriter{ display:inline; border-right:2px solid rgba(255,255,255,0.7); white-space:pre-wrap; }
@keyframes blink { 50%{ border-color: transparent; } }
.typewriter{ animation: blink 1s step-end infinite; }

/* Training ground sword swish */
.sword-swish{
  position:absolute; right:12%; bottom:22%; width:120px; height:120px; border:2px dashed rgba(255,255,255,0.25);
  border-radius:50%; transform-origin: 20% 80%;
  animation: swish 2.4s ease-in-out infinite;
}
@keyframes swish{ 0%{ transform: rotate(-20deg);} 50%{ transform: rotate(25deg);} 100%{ transform: rotate(-20deg);} }

/* Garden vines */
.vines{
  position:absolute; left:4%; bottom:0; width:160px; height:160px; opacity:0.8;
  background: radial-gradient(circle at 40% 80%, var(--leaf) 0 4px, transparent 5px),
             radial-gradient(circle at 70% 60%, var(--leaf) 0 4px, transparent 5px),
             radial-gradient(circle at 30% 40%, var(--leaf) 0 4px, transparent 5px);
  filter: blur(0.4px);
}

.small{ font-size:12px; color:var(--muted); }
